<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>จัดการบัญชี</title>

    <link rel="stylesheet" href="../assets/css/bootstrap-reboot.min.css" />
    <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="../assets/css/all.min.css" />
    <link rel="stylesheet" href="../assets/css/animations.css" />
    <link rel="stylesheet" href="../assets/css/animate.min.css" />
    <link rel="stylesheet" href="../assets/css/sweetalert2.min.css" />
    <link rel="stylesheet" href="../assets/css/main.css" />
    <link rel="stylesheet" href="../assets/css/button.css" />
    <link rel="stylesheet" href="../assets/css/modal.css" />
    <link rel="stylesheet" href="../assets/css/topbar.css" />
    <link rel="stylesheet" href="../assets/css/footer.css" />
    <link rel="stylesheet" href="../assets/css/policy.css" />
    <link rel="stylesheet" href="../assets/css/topbarJobSeeker.css" />
    <link rel="stylesheet" href="../assets/css/topbarBusiness.css" />

    <link rel="stylesheet" href="css/dashboardBusiness.css" />
    <link rel="stylesheet" href="css/manage_account.css" />
  </head>

  <body>
    <section class="container">
      <article class="row">
        <div class="col-12">
          <!-- topbar -->
          <article class="topbar">
            <!-- assets/components/topbar.js -->
          </article>
          <!-- end topbar -->

          <!-- menu show ผู้สมัครงาน และ ผู้ประกอบการ -->
          <article class="clWhitetGray calC businessMenuShow">
            <!-- userMenuShow businessMenuShow -->
            <!-- assets/components/topBarBusiness.js -->
            <!-- assets/components/topBarJobSeeker.js -->
          </article>
          <!-- end  menu show ผู้สมัครงาน และ ผู้ประกอบการ -->

          <article class="mt-5">
            <nav aria-label="breadcrumb">
              <ol class="breadcrumb breadcrumbJobbkk">
                <li class="breadcrumb-item">
                  <a href="javascript:void(0)">Home</a>
                </li>
                <li class="breadcrumb-item">
                  <a href="javascript:void(0)">Library</a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">
                  จัดการบัญชี
                </li>
              </ol>
            </nav>

            <div class="lineDash"></div>

            <article class="menu_icms mb-5">
              <!-- js/menu_icms.js -->
            </article>

            <section class="clWhitetGray borderRadiusStyle p-3 mb-5">
              <article class="gridBoard">
                <!-- left -->
                <div>
                  <!-- profile -->
                  <section id="profile">
                    <!-- js/profile.js -->
                  </section>
                  <!-- end profile -->

                  <section
                    id="menuDashboardBusiness"
                    class="clWhite borderRadiusStyle py-3"
                  >
                    <!-- js/menuDashboard.js -->
                  </section>
                </div>
                <!-- end left -->

                <!-- right -->
                <div>
                  <section
                    id="buttonUseBusiness"
                    class="clWhite borderRadiusStyle p-3"
                  >
                    <article class="flexInfo">
                      <div>
                        <h2 class="fontSubHead">จัดการบัญชี</h2>
                      </div>
                      <div class="text-right">
                        <h6 class="textRed fontText font-weight-bold">
                          เข้าสู่ระบบล่าสุด
                        </h6>
                        <p>10 ก.ย. 2020 | 14:09</p>
                      </div>
                    </article>

                    <div class="lineDashUrgent"></div>

                    <article class="mb-5">
                      <ul class="flexButtonBusiness">
                        <!-- js/button_businessFive.js -->
                      </ul>
                    </article>

                    <article>
                      <div class="flex_center mb-3">
                        <figure class="mb-3">
                          <img
                            src="images/menuDashboardBusiness-12.svg"
                            alt=""
                          />
                        </figure>
                        <h2 class="mb-2">การตรวจสอบความปลอดภัย</h2>
                        <h6>ID : 123456</h6>
                      </div>

                      <form action="" id="confirm_password" class="mb-5">
                        <div class="manage_alert p-3">
                          <p class="mb-5">
                            <span class="textOrange"
                              ><i class="fas fa-exclamation-circle"></i
                            ></span>
                            โปรดอ่านข้อมูลอย่างละเอียด
                          </p>
                          <p class="mb-3">
                            คุณกำลังพยายามลบบัญชีผู้ประกอบการบน Jobbkk
                            ที่สามารถทำให้คุณเข้าถึงผลิตภัณฑ์ต่างๆของ Jobbkk
                            โปรดติ๊กช่อง
                            <span class="textRed">"ยืนยัน"</span>
                            เพื่อรับทราบว่า คุณจะไม่สามารถเข้าใช้ผลิตภัณฑ์ใดๆ
                            ตลอดจนข้อมูลทั้งหมดที่เชื่อมโยงกับผลิตภัณฑ์ดังกล่าวได้อีกต่อไป
                            และคุณจะสูญเสียบัญชีของคุณ
                          </p>
                          <label
                            class="confirm_check mb-3"
                            style="display: inline-block"
                            class="mb-3"
                            ><input type="checkbox" name="" id="" />
                            ยืนยันลบบัญชี</label
                          >
                          <div class="mb-5">
                            <p>โปรดป้อนรหัสผ่าน</p>
                            <div class="manage_password">
                              <section>
                                <input
                                  type="password"
                                  class="form-control dis_password"
                                  id="password"
                                  disabled
                                />
                                <button type="button" class="hide_password">
                                  <i class="fas fa-eye-slash"></i>
                                </button>
                              </section>
                              <small class="textRed">กรุณากรอกรหัสผ่าน</small>
                            </div>
                          </div>

                          <div class="mb-3 btn_del">
                            <button type="submit" class="disabled" disabled>
                              ลบบัญชี
                            </button>
                          </div>
                        </div>
                      </form>

                      <section id="cancel_account">
                        <div class="text-right mb-3">
                          <button class="cancel_account_btn">
                            ยกเลิกการลบบัญชี
                            <i class="fas fa-angle-down"></i>
                          </button>
                        </div>
                        <div class="clWhitetGray borderRadiusStyle tab_lab p-3">
                          <p class="mb-3">
                            คุณจะสามารถยกเลิกการลบได้ภายในไม่เกิน 90 วัน
                            หลังจากที่คุณเริ่มดำเนินการลบบัญชีของคุณ หลังจาก 90
                            วันแล้ว
                            บัญชีของคุณและข้อมูลทั้งหมดของคุณจะถูกลบอย่างถาวร
                            อีกทั้งคุณจะไม่สามารถกู้ข้อมูลของคุณได้อีก
                          </p>

                          <button
                            type="button"
                            class="mb-5 cancel_account_alert"
                          >
                            ยกเลิกการลบบัญชี
                          </button>
                        </div>
                      </section>
                    </article>
                  </section>
                </div>
                <!-- end right -->
              </article>
            </section>
          </article>
        </div>
      </article>

      <!-- footer -->
      <footer class="calC footerJobbkk">
        <!-- assets/components/footer.js -->
      </footer>
      <!-- end footer -->
    </section>

    <!--backtotop-->
    <a href="javascript:void(0)" class="cd-top">Top</a>
    <div id="policy"></div>

    <script src="../assets/js/jquery-3.5.1.min.js"></script>
    <script src="../assets/js/bootstrap.bundle.min.js"></script>
    <script src="../assets/js/slide-menu.js"></script>
    <script src="../assets/js/backToTop.js"></script>
    <script src="../assets/js/sweetalert2@10.js"></script>

    <script src="../assets/components/pathActive.js"></script>
    <script src="../assets/components/topBarBusiness.js"></script>
    <script src="../assets/components/footer.js"></script>
    <script src="../assets/components/cookiePolicy.js"></script>

    <script src="js/tooltip.js"></script>
    <script src="js/profile.js"></script>
    <script src="js/menuDashboard.js"></script>
    <script src="js/button_businessFive.js"></script>

    <script>
      const form = document.querySelector("#confirm_password"),
        manage_alert = document.querySelector(".manage_alert"),
        password = document.querySelector("#password");
      let true_password = true;

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        validate();
      });

      const validate = () => {
        const password_val = password.value.trim();
        if (password_val === "") {
          error(password, "กรุณาระบุรหัสผ่าน");
        } else {
          success(password, "");
          Swal.fire({
            title: "ระบบจะทำการลบไอดีของคุณ ?",
            icon: "warning",
            showCancelButton: true,
            showconfirmButton: true,
            confirmButtonText: "ตกลง",
            cancelButtonText: "ยกเลิก",
          }).then((result) => {
            if (result.value) {
              Swal.fire({
                title: "ระบบได้ทำการลบไอดีของคุณเรียบร้อยแล้ว",
                icon: "success",
                showConfirmButton: false,
                timer: 2000,
              });
            }

            const cancel_account_btn = document.querySelector(
                ".cancel_account_btn"
              ),
              cancel_account = document.querySelector("#cancel_account"),
              tab_lab = document.querySelector(".tab_lab");

            cancel_account.style.display = " block";
            cancel_account_btn.addEventListener("click", () => {
              const open = cancel_account_btn.parentElement.nextElementSibling;
              if (open.classList.contains("active")) {
                open.classList.remove("active");
                open.removeAttribute("style");
              } else {
                open.classList.add("active");
                open.style.maxHeight = open.scrollHeight + "px";
              }
            });

            $(".cancel_account_alert").on("click", () => {
              swal
                .fire({
                  title: "คุณยกเลิกการลบบัญชีสำเร็จแล้ว",
                  icon: "success",
                  showConfirmButton: false,
                  timer: 2000,
                })
                .then((result) => {
                  if (result) {
                    window.location.href = "manage_account.html";
                  }
                });
            });
          });
        }
      };

      manage_alert.addEventListener("click", (e) => {
        if (e.target.classList.contains("confirm_check")) {
          const confirm_check = e.target.parentElement;
          console.log(confirm_check);
          confirm_check.lastElementChild.previousElementSibling
            .querySelector("input")
            .toggleAttribute("disabled");
          const toggle_disabled =
            confirm_check.lastElementChild.querySelector("button");
          toggle_disabled.toggleAttribute("disabled");
          toggle_disabled.classList.toggle("disabled");
        }
        if (e.target.classList.contains("hide_password")) {
          const show_password = e.target.parentElement;
          console.log(show_password);
          if (true_password) {
            show_password.firstElementChild.setAttribute("type", "text");
            show_password.lastElementChild.innerHTML = `<i class="fas fa-eye"></i>`;
          } else {
            show_password.firstElementChild.setAttribute("type", "password");
            show_password.lastElementChild.innerHTML = `<i class="fas fa-eye-slash"></i>`;
          }
          true_password = !true_password;
        }
      });

      const error = (input, message) => {
        const input_element = input.closest(".manage_password");
        const small = input_element.querySelector("small");

        input_element.querySelector(".dis_password").classList.add("error");
        small.classList.add("error");
      };

      const success = (input, message) => {
        const input_element = input.closest(".manage_password");
        const small = input_element.querySelector("small");

        input_element.querySelector(".dis_password").classList.remove("error");
        small.className = "textRed";
      };
    </script>
  </body>
</html>
